# Coverage Converter
This Task converts .coverage file into .coveragexml to be used with other Tasks to generate a Code Coverage Report in Azure Pipeline(Azure DevOps). 

The .coverage file is generated by vsTest.exe or VSTest@2(Azure DevOps)

## Motivation/Points:
- I created this extension to help my pipeline process.
- Instead building a script I rather share the same code with everyone, so people don't need to waste their time searching for things that should be straight forward.
- Learn some new stuff like AzureDevOps Tasks and a bit of Node.

## Things to keep in mind
- We can't use Coverage.exe to generate .coverage file
    - link: https://github.com/microsoft/vstest/issues/1502

- . :broken_heart: We can't use VSTest@2 Task with codeCoverageEnabled as true
    - If we enabled it, this will add a file into Code Coverage tab in Azure DevOps, which will override the ReportGenerator reports.
    - This is not because ConverteCoverage, it is because VSTest@2 upload the coverage generated by itself to Azure Pipeline Tab Code Coverage automatically and we can't disable it. If they didn't upload the code coverage automatically we could use the coverage file generated by the VSTest@2. That is why the CoverteCoverage needs to execute again the VSTest@2.


## How to setup this pipeline?

You can check this here:
https://github.com/Rogeriohsjr/TestWebApp/blob/master/azure-pipelines.yml

Basically we have.

- Execute VSTest@2 to upload Tests to Azure DevOps
- Execute CoverageConverter@0 to generate the DynamicCodeCoverage.coveragexml
- Execute reportgenerator@4 to generate the Reports from DynamicCodeCoverage.coveragexml generated above
- Execute PublishCodeCoverageResults@1 to post the Result from reportgenerator@4


## How does the convertion works?

Take a look in the code, I tried to comment the code to make that easier to understand. It is all in one file.

https://github.com/Rogeriohsjr/AzureDevOpsTask/blob/master/buildAndReleaseTask/index.ts
